''' Trivial Eve-SQLAlchemy example. '''
# SQLAlchemy Imports
from database import DBTweets, Base
from eve import Eve
from eve_sqlalchemy import SQL
from eve_sqlalchemy.validation import ValidatorSQL

# Eve-SQLAlchemy imports
from eve_sqlalchemy.decorators import registerSchema


registerSchema('tweets')(DBTweets)

SETTINGS = {
    'DEBUG': True,
    'SQLALCHEMY_DATABASE_URI': 'sqlite:////tmp/tweets.db',
    'DOMAIN': {
        'tweets': DBTweets._eve_schema['tweets'],
        }
}

app = Eve(auth=None, settings=SETTINGS, validator=ValidatorSQL, data=SQL)

# bind SQLAlchemy
db = app.data.driver
Base.metadata.bind = db.engine
db.Model = Base
db.create_all()

if __name__ == '__main__':
    app.run(debug=True, use_reloader=True)
